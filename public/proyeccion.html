<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momentos en Vivo - Proyección</title>
    <style>
        body { margin: 0; background-color: #000; color: white; overflow: hidden; font-family: sans-serif; }
        #projection-container { position: relative; width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; }
        #projection-container img { max-width: 95%; max-height: 95%; position: absolute; opacity: 0; transform: scale(1.05); transition: opacity 1.5s ease-in-out, transform 1.5s ease-in-out; }
        #projection-container img.visible { opacity: 1; transform: scale(1); }
        #placeholder { font-size: 2em; color: #555; }

        /* Estilos para el QR */
        #qr-container {
            position: absolute;
            bottom: 20px; /* Abajo */
            right: 20px; /* A la derecha */
            background-color: rgba(255, 255, 255, 0.9); /* Fondo blanco semitransparente */
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 100; /* Para que esté por encima de las fotos */
        }
        #qr-container img {
            max-width: 150px; /* Tamaño del QR */
            height: auto;
            border: 2px solid #333;
        }
        #qr-container p {
            margin-top: 5px;
            font-size: 0.8em;
            color: #333;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="projection-container">
        <div id="placeholder">Esperando fotos aprobadas...</div>

        <div id="qr-container">
            <img id="qr-code-img" alt="Código QR para subir fotos">
            <p>¡Escanea para enviar tu foto!</p>
        </div>
    </div>

    <script>
        const container = document.getElementById('projection-container');
        const placeholder = document.getElementById('placeholder');
        const qrCodeImg = document.getElementById('qr-code-img');
        const NETLIFY_URL = 'https://playful-parfait-6bfab1.netlify.app'; // CONFIRMA TU URL FINAL AQUÍ

        // Genera el QR. Usamos un servicio externo para generar la imagen del QR.
        // Reemplaza YOUR_NETLIFY_URL_HERE con tu URL real.
        const qrApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(NETLIFY_URL)}`;
        qrCodeImg.src = qrApiUrl;


        let currentIndex = -1;
        let photos = [];
        let knownPhotoIds = new Set();
        let slideshowInterval;

        function displayPhoto(photo) { /* ... (esta función es la misma) ... */ }
        function showNextPhotoInLoop() { /* ... (esta función es la misma) ... */ }
        async function fetchApprovedPhotos() { /* ... (esta función es la misma) ... */ }
        async function start() { /* ... (esta función es la misma) ... */ }

        start();
    </script>
</body>
</html>